<!DOCTYPE html>

<html lang="en">
    <head>

        <meta content="4851b15326f6b290-09e175a0bcd24dcd-gab2f4fb87b61a9c2-c" name="google-translate-customization"/>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        
            
        
            
        
            
        
            
        

        <!-- asciidoctor -a coderay-css=class,linkcss,source-highlighter=coderay -b html5 -D . /dev/null -->
        <style>
            /* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

        </style>
        <style>
            /* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

        </style>
        <style>

            
            

            #footer {
                background-color: inherit;
                text-align: right;
            }

            #google_translate_element {
                padding-top: 32px;
            }

            
            .green {
                color: #006400;
            }

            
            .listingblock > .content pre {
                overflow: auto;
                white-space: pre;
                word-wrap: inherit;
            }

            pre {
                margin-bottom: 0.625em;
            }

            .red {
                color: #ff0000;
            }

            select {
                width: inherit;
            }

            
            .yellow {
                color: #cc0;
            }

        </style>

        <title>Problem Set 8: Mashup</title>

    </head>

    <body class="article toc2 toc-left">

        

            <div id="header">

                
                    
                        <h1>Problem Set 8: Mashup</h1>
                    
                    <span id="author" class="author">
                        This is CS50. Harvard University. Fall 2015.
                    </span>
                

                
                    <div id="toc" class="toc2">
                        <div id="toctitle">Table of Contents</div>
                        <ul class="sectlevel1">
<li><a href="#objectives">Objectives</a></li>
<li><a href="#recommended_reading">Recommended Reading</a></li>
<li><a href="#academic_honesty">Academic Honesty</a>
<ul class="sectlevel2">
<li><a href="#reasonable">Reasonable</a></li>
<li><a href="#not_reasonable">Not Reasonable</a></li>
</ul>
</li>
<li><a href="#getting_ready">Getting Ready</a>
<ul class="sectlevel2">
<li><a href="#google_maps">Google Maps</a></li>
<li><a href="#google_news">Google News</a></li>
<li><a href="#jquery">jQuery</a></li>
<li><a href="#typeahead_js">typeahead.js</a></li>
<li><a href="#underscore">Underscore</a></li>
</ul>
</li>
<li><a href="#getting_started">Getting Started</a></li>
<li><a href="#walkthrough">Walkthrough</a>
<ul class="sectlevel2">
<li><a href="#import">import</a></li>
<li><a href="#index_html">index.html</a></li>
<li><a href="#styles_css">styles.css</a></li>
<li><a href="#scripts_js">scripts.js</a>
<ul class="sectlevel3">
<li><a href="#addmarker">addMarker</a></li>
<li><a href="#configure">configure</a></li>
<li><a href="#hideinfo">hideInfo</a></li>
<li><a href="#removemarkers">removeMarkers</a></li>
<li><a href="#search">search</a></li>
<li><a href="#showinfo">showInfo</a></li>
<li><a href="#update">update</a></li>
</ul>
</li>
<li><a href="#update_php">update.php</a></li>
<li><a href="#search_php">search.php</a></li>
<li><a href="#articles_php">articles.php</a></li>
<li><a href="#config_php">config.php</a></li>
<li><a href="#helpers_php">helpers.php</a></li>
<li><a href="#config_json">config.json</a></li>
</ul>
</li>
<li><a href="#what_to_do">What To Do</a>
<ul class="sectlevel2">
<li><a href="#config_json_2">config.json</a></li>
<li><a href="#import_2">import</a></li>
<li><a href="#search_php_2">search.php</a></li>
<li><a href="#scripts_js_2">scripts.js</a>
<ul class="sectlevel3">
<li><a href="#configure_2">configure</a></li>
<li><a href="#addmarker_2">addMarker</a></li>
<li><a href="#removemarkers_2">removeMarkers</a></li>
<li><a href="#personal_touch">personal touch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#how_to_submit">How to Submit</a>
<ul class="sectlevel2">
<li><a href="#step_1_of_2">Step 1 of 2</a></li>
<li><a href="#step_2_of_2">Step 2 of 2</a></li>
</ul>
</li>
</ul>
                    </div>
                

            </div>

        

        <div id="content">
            <div class="sect1">
<h2 id="objectives"><a class="link" href="#objectives">Objectives</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Introduction to JavaScript, Ajax, JSON.</p>
</li>
<li>
<p>Exposure to objects and methods.</p>
</li>
<li>
<p>Grapple with real-world APIs and libraries.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="recommended_reading"><a class="link" href="#recommended_reading">Recommended Reading</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="academic_honesty"><a class="link" href="#academic_honesty">Academic Honesty</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This course&#8217;s philosophy on academic honesty is best stated as "be reasonable." The course recognizes that interactions with classmates and others can facilitate mastery of the course&#8217;s material. However, there remains a line between enlisting the help of another and submitting the work of another. This policy characterizes both sides of that line.</p>
</div>
<div class="paragraph">
<p>The essence of all work that you submit to this course must be your own. Collaboration on problem sets is not permitted except to the extent that you may ask classmates and others for help so long as that help does not reduce to another doing your work for you. Generally speaking, when asking for help, you may show your code to others, but you may not view theirs, so long as you and they respect this policy&#8217;s other constraints. Collaboration on quizzes is not permitted at all. Collaboration on the course&#8217;s final project is permitted to the extent prescribed by its specification.</p>
</div>
<div class="paragraph">
<p>Below are rules of thumb that (inexhaustively) characterize acts that the course considers reasonable and not reasonable. If in doubt as to whether some act is reasonable, do not commit it until you solicit and receive approval in writing from the course&#8217;s heads. Acts considered not reasonable by the course are handled harshly. If the course refers some matter for disciplinary action and the outcome is punitive, the course reserves the right to impose local sanctions on top of that outcome that may include an unsatisfactory or failing grade for work submitted or for the course itself.</p>
</div>
<div class="paragraph">
<p>If you commit some act that is not reasonable but bring it to the attention of the course&#8217;s heads within 72 hours, the course may impose local sanctions that may include an unsatisfactory or failing grade for work submitted, but the course will not refer the matter for further disciplinary action except in cases of repeated acts.</p>
</div>
<div class="sect2">
<h3 id="reasonable"><a class="link" href="#reasonable">Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Communicating with classmates about problem sets' problems in English (or some other spoken language).</p>
</li>
<li>
<p>Discussing the course&#8217;s material with others in order to understand it better.</p>
</li>
<li>
<p>Helping a classmate identify a bug in his or her code at office hours, elsewhere, or even online, as by viewing, compiling, or running his or her code, even on your own computer.</p>
</li>
<li>
<p>Incorporating snippets of code that you find online or elsewhere into your own code, provided that those snippets are not themselves solutions to assigned problems and that you cite the snippets' origins.</p>
</li>
<li>
<p>Reviewing past semesters' quizzes and solutions thereto.</p>
</li>
<li>
<p>Sending or showing code that you&#8217;ve written to someone, possibly a classmate, so that he or she might help you identify and fix a bug.</p>
</li>
<li>
<p>Sharing snippets of your own code online so that others might help you identify and fix a bug.</p>
</li>
<li>
<p>Turning to the web or elsewhere for instruction beyond the course&#8217;s own, for references, and for solutions to technical difficulties, but not for outright solutions to problem set&#8217;s problems or your own final project.</p>
</li>
<li>
<p>Whiteboarding solutions to problem sets with others using diagrams or pseudocode but not actual code.</p>
</li>
<li>
<p>Working with (and even paying) a tutor to help you with the course, provided the tutor does not do your work for you.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="not_reasonable"><a class="link" href="#not_reasonable">Not Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Accessing a solution to some problem prior to (re-)submitting your own.</p>
</li>
<li>
<p>Asking a classmate to see his or her solution to a problem set&#8217;s problem before (re-)submitting your own.</p>
</li>
<li>
<p>Decompiling, deobfuscating, or disassembling the staff&#8217;s solutions to problem sets.</p>
</li>
<li>
<p>Failing to cite (as with comments) the origins of code or techniques that you discover outside of the course&#8217;s own lessons and integrate into your own work, even while respecting this policy&#8217;s other constraints.</p>
</li>
<li>
<p>Giving or showing to a classmate a solution to a problem set&#8217;s problem when it is he or she, and not you, who is struggling to solve it.</p>
</li>
<li>
<p>Looking at another individual&#8217;s work during a quiz.</p>
</li>
<li>
<p>Paying or offering to pay an individual for work that you may submit as (part of) your own.</p>
</li>
<li>
<p>Providing or making available solutions to problem sets to individuals who might take this course in the future.</p>
</li>
<li>
<p>Searching for, soliciting, or viewing a quiz&#8217;s questions or answers prior to taking the quiz.</p>
</li>
<li>
<p>Searching for or soliciting outright solutions to problem sets online or elsewhere.</p>
</li>
<li>
<p>Splitting a problem set&#8217;s workload with another individual and combining your work.</p>
</li>
<li>
<p>Submitting (after possibly modifying) the work of another individual beyond allowed snippets.</p>
</li>
<li>
<p>Submitting the same or similar work to this course that you have submitted or will submit to another.</p>
</li>
<li>
<p>Submitting work to this course that you intend to use outside of the course (e.g., for a job) without prior approval from the course&#8217;s heads.</p>
</li>
<li>
<p>Using resources during a quiz beyond those explicitly allowed in the quiz&#8217;s instructions.</p>
</li>
<li>
<p>Viewing another&#8217;s solution to a problem set&#8217;s problem and basing your own solution on it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_ready"><a class="link" href="#getting_ready">Getting Ready</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your (final!) mission for this problem set is to implement "mashup" that integrates Google Maps with Google News with a MySQL database containing thousands of postal codes, GPS coordinates, and more. Quite like this version here by the staff!</p>
</div>
<div class="paragraph">
<p><a href="https://mashup.cs50.net/">https://mashup.cs50.net/</a></p>
</div>
<div class="paragraph">
<p>Not only can you search for places via the text box up top, you can also click on and drag the map elsewhere. Scattered across the map, meanwhile, are newspaper icons that, when clicked, provide links to local news!</p>
</div>
<div class="paragraph">
<p>You may notice that some markers (and labels) overlap others or are otherwise at the wrong coordinates. The <a href="http://www.geonames.org/">GeoNames</a> geographical database that we&#8217;re using is actually imperfect, whereby some places' coordinates are off. For instance, East Boston isn&#8217;t in Back Bay. And Readville isn&#8217;t in Boston Harbor. Not to worry if you see those same symptoms in your mashup, assuming the source of the problem is indeed the data itself!</p>
</div>
<div class="paragraph">
<p>Anyhow, how neat! But where to begin?</p>
</div>
<div class="sect2">
<h3 id="google_maps"><a class="link" href="#google_maps">Google Maps</a></h3>
<div class="paragraph">
<p>Odds are you&#8217;re already familiar, but surf on over to Google Maps anyway at <a href="https://www.google.com/maps">https://www.google.com/maps</a>. Input <strong>42.374490, -71.117185</strong> into the search box up top, and you should find yourself at Harvard. Input <strong>41.3163284, -72.9245318</strong>, and you should find yourself at Yale.</p>
</div>
<div class="paragraph">
<p>Interesting! It seems Google Maps understands GPS coordinates (i.e., latitude and longitude). In fact, search for <strong>28.410, -81.584</strong>. Perhaps you&#8217;d rather be there? (You might need to zoom out.)</p>
</div>
<div class="paragraph">
<p>It turns out that Google Maps offers an API that allows you to embed Google&#8217;s maps into your own web apps. Hey, that&#8217;s one of the ingredients we need! Go ahead and familiarize yourself with <a href="https://developers.google.com/maps/documentation/javascript/">Google Maps Javascript API</a> by perusing the three sections below of its Developer&#8217;s Guide. Read through any sample code carefully, clicking <strong>View example</strong> below it, if present, to see the code in action.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://developers.google.com/maps/documentation/javascript/tutorial">Getting Started</a></p>
</li>
<li>
<p>Drawing on the Map</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://developers.google.com/maps/documentation/javascript/markers">Markers</a></p>
</li>
<li>
<p><a href="https://developers.google.com/maps/documentation/javascript/infowindows">Info Windows</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="google_news"><a class="link" href="#google_news">Google News</a></h3>
<div class="paragraph">
<p>Okay, now we need us some news. If you happen to have a Google Account (e.g., Gmail), head to <a href="https://news.google.com/">https://news.google.com/</a> and click the <strong>Personalize</strong> button at top-right. Below the icon should appear <strong>Personalize Google News</strong>, down below which is <strong>Advanced</strong>. Click the latter, and <strong>Add a local section</strong> should appear at right. Input, say, <strong>Cambridge, Massachusetts</strong> or <strong>New Haven, Connecticut</strong> into that box, then click <strong>Add</strong>. You should find yourself at either of the URLs below?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://news.google.com/news/section?cf=all&amp;pz=1&amp;geo=Cambridge,+Massachusetts&amp;ned=us&amp;redirect=true">https://news.google.com/news/section?cf=all&amp;pz=1&amp;geo=Cambridge,+Massachusetts&amp;ned=us&amp;redirect=true</a></p>
</li>
<li>
<p><a href="https://news.google.com/news/section?cf=all&amp;pz=1&amp;geo=New+Haven,+Connecticut&amp;ned=us&amp;redirect=true">https://news.google.com/news/section?cf=all&amp;pz=1&amp;geo=New+Haven,+Connecticut&amp;ned=us&amp;redirect=true</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Not to worry if you don&#8217;t have a Google Account. Just head straight to either URL.</p>
</div>
<div class="paragraph">
<p>Interesting, it looks like our input is now the value of an HTTP parameter, <code>geo</code>, though there&#8217;s a bunch of other parameters too. (Know that <code>+</code> is one way a browser can encode a space in a URL. Another way is with <code>%20</code>.) One at a time, delete each of those other key-value pairs plus an ampersand (e.g., first <code>cf=all&amp;</code>, then <code>pz=1&amp;</code>, then <code>&amp;ned=us</code>, then <code>&amp;redirect=true</code>, hitting Enter after each deletion so as to reload the page via a shorter and shorter URL. You should find that
Google still returns news for Cambridge or New Haven even when the URL is either of the below?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://news.google.com/news/section?geo=Cambridge,+Massachusetts">https://news.google.com/news/section?geo=Cambridge,+Massachusetts</a></p>
</li>
<li>
<p><a href="https://news.google.com/news/section?geo=New+Haven,+Connecticut">https://news.google.com/news/section?geo=New+Haven,+Connecticut</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nice! +1 for trial and error. Now try changing the value of <code>geo</code> to, say, <code>02138</code> or <code>06511</code> and then hit Enter again. You should find yourself at the URL below? The articles might change (since Cambridge and New Haven have more than one postal code each), but the news should still be about Cambridge or New Haven?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://news.google.com/news/section?geo=02138">https://news.google.com/news/section?geo=02138</a></p>
</li>
<li>
<p><a href="https://news.google.com/news/section?geo=06511">https://news.google.com/news/section?geo=06511</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nice. Though the page you&#8217;re looking at, of course, is written in HTML. And all we want, if the staff&#8217;s solution is any indication, is a bulleted list of articles' titles and links. How to get those without "scraping" this page&#8217;s (surely complicated) HTML? Scroll down to the page&#8217;s bottom and look for <strong>RSS</strong>. Click that link, and you should find yourself at one of the URLs below?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://news.google.com/news?cf=all&amp;hl=en&amp;pz=1&amp;ned=us&amp;geo=02138&amp;output=rss">https://news.google.com/news?cf=all&amp;hl=en&amp;pz=1&amp;ned=us&amp;geo=02138&amp;output=rss</a></p>
</li>
<li>
<p><a href="https://news.google.com/news?cf=all&amp;hl=en&amp;pz=1&amp;ned=us&amp;geo=06511&amp;output=rss">https://news.google.com/news?cf=all&amp;hl=en&amp;pz=1&amp;ned=us&amp;geo=06511&amp;output=rss</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As before, delete any parameters that don&#8217;t feel core to the mission at hand, leaving only, say, <code>geo</code> and, now, <code>output</code>. You should find yourself at one of the (still fully functional) URLs below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://news.google.com/news/feeds?geo=02138&amp;output=rss">https://news.google.com/news/feeds?geo=02138&amp;output=rss</a></p>
</li>
<li>
<p><a href="https://news.google.com/news/feeds?geo=06511&amp;output=rss">https://news.google.com/news/feeds?geo=06511&amp;output=rss</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Deleting those parameters probably isn&#8217;t necessary (and, who knows, their absence might break things eventually), but whittling a URL down to its essence does feel like better design, so let&#8217;s stick with simple.</p>
</div>
<div class="paragraph">
<p>Now, what&#8217;s all this markup that&#8217;s now on your screen? It looks a bit like HTML, but you&#8217;re actually looking at an "RSS feed," a flavor of XML (a tag-based markup language). For quite some time, RSS was all the rage insofar as it enabled websites to "syndicate" articles in a standard format that "RSS readers" could read. RSS isn&#8217;t quite as hip anymore these days, but it&#8217;s still a terrific find for us because it&#8217;s "machine-readable". Because it adheres to a standard format, we can parse it (pretty easily!) with software. Here&#8217;s what an RSS feed generally looks like (sans actual data):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="tag">&lt;rss</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;channel&gt;</span>
        <span class="tag">&lt;title&gt;</span>...<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;description&gt;</span>...<span class="tag">&lt;/description&gt;</span>
        <span class="tag">&lt;link&gt;</span>...<span class="tag">&lt;/link&gt;</span>
        <span class="tag">&lt;item&gt;</span>
            <span class="tag">&lt;guid&gt;</span>...<span class="tag">&lt;/guid&gt;</span>
            <span class="tag">&lt;title&gt;</span>...<span class="tag">&lt;/title&gt;</span>
            <span class="tag">&lt;link&gt;</span>...<span class="tag">&lt;/link&gt;</span>
            <span class="tag">&lt;description&gt;</span>...<span class="tag">&lt;/description&gt;</span>
            <span class="tag">&lt;category&gt;</span>...<span class="tag">&lt;/category&gt;</span>
            <span class="tag">&lt;pubDate&gt;</span>...<span class="tag">&lt;/pubDate&gt;</span>
        <span class="tag">&lt;/item&gt;</span>
        ...
    <span class="tag">&lt;/channel&gt;</span>
<span class="tag">&lt;/rss&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In other words, an RSS feed contains a root element called <code>rss</code>, the child of which is an element called <code>channel</code>.  Inside of <code>channel</code> are elements called <code>title</code>, <code>description</code>, and <code>link</code>, followed by one or more elements called <code>item</code>, each of which represents an article (or blog post or the like). Each <code>item</code>, meanwhile, contains elements called <code>guid</code>, <code>title</code>, <code>link</code>, <code>description</code>, <code>category</code>, and <code>pubDate</code>. Of course, between most of these start tags and end tags should be actual data (e.g., an article&#8217;s actual title). For more details, see <a href="http://cyber.law.harvard.edu/rss/rss.html">http://cyber.law.harvard.edu/rss/rss.html</a>.</p>
</div>
<div class="paragraph">
<p>Ultimately, we&#8217;ll parse RSS feeds from Google News using PHP and then return articles' titles and links to our web app via Ajax as JSON. But more on that in a bit.</p>
</div>
</div>
<div class="sect2">
<h3 id="jquery"><a class="link" href="#jquery">jQuery</a></h3>
<div class="paragraph">
<p>Recall that <a href="http://jquery.com/">jQuery</a> is a super-popular JavaScript library that "makes things like HTML document traversal and manipulation, event handling, animation, and Ajax much simpler with an easy-to-use API that works across a multitude of browsers." To be fair, though, it&#8217;s not without a learning curve. Read through a few sections of jQuery&#8217;s documentation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://learn.jquery.com/using-jquery-core/document-ready/">$( document ).ready()</a></p>
</li>
<li>
<p><a href="http://learn.jquery.com/using-jquery-core/selecting-elements/">Selecting Elements</a></p>
</li>
<li>
<p><a href="http://learn.jquery.com/ajax/jquery-ajax-methods/">jQuery&#8217;s Ajax-Related Methods</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>jQuery&#8217;s documentation isn&#8217;t the most user-friendly, though, so odds are you&#8217;ll ultimately find <a href="https://www.google.com/">Google</a> and <a href="http://stackoverflow.com/">Stack Overflow</a> handier resources.</p>
</div>
<div class="paragraph">
<p>Recall that <code>$</code> is usually (though not always) an alias for a global object that&#8217;s otherwise called <code>jQuery</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="typeahead_js"><a class="link" href="#typeahead_js">typeahead.js</a></h3>
<div class="paragraph">
<p>Now take a look at a demo of Twitter&#8217;s typeahead.js library, a jQuery "plugin" that adds support for autocompletion to HTML text fields. See <strong>The Basics</strong> specifically:</p>
</div>
<div class="paragraph">
<p><a href="http://twitter.github.io/typeahead.js/examples/">http://twitter.github.io/typeahead.js/examples/</a></p>
</div>
<div class="paragraph">
<p>And now skim the documentation for version 0.10.5 of that same library, which (surprise, surprise) isn&#8217;t as user-friendly as would be ideal. But, again, not to worry.</p>
</div>
<div class="paragraph">
<p><a href="https://gist.github.com/dmalan/8abe1025cfe5121614b8">https://gist.github.com/dmalan/8abe1025cfe5121614b8</a></p>
</div>
<div class="paragraph">
<p>Incidentally, the latest version of Twitter&#8217;s library is actually 0.11.1, but it&#8217;s buggy. :-(</p>
</div>
</div>
<div class="sect2">
<h3 id="underscore"><a class="link" href="#underscore">Underscore</a></h3>
<div class="paragraph">
<p>Finall, skim the documentation for <a href="http://underscorejs.org/">Underscore</a>, another popular JavaScript library that offers functions that many folks wish were built into JavaScript itself! In particular, take note of <code>template</code>. Admittedly, this documentation isn&#8217;t very user-friendly either, so not to worry if usage is non-obvious for the moment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://underscorejs.org/#template">http://underscorejs.org/#template</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Much like jQuery uses <code>$</code> as its symbol (because it looks cool), Underscore uses <code>_</code> is its symbol. For instance <code>_.template</code> means that Underscore has a method (i.e., function) called <code>template</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_started"><a class="link" href="#getting_started">Getting Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Phew, that was a lot! But think of it this way: that&#8217;s a lot of functionality you don&#8217;t need to implement yourself! Indeed, implementing autocompletion alone could be a project unto itself. We just need to figure out how to wire (or, if you will, "mash") all of these components together in order to build our own amazing web app.</p>
</div>
<div class="paragraph">
<p>Anyhow! Log into <a href="https://cs50.io/">CS50 IDE</a> and, open a terminal window, and execute <code>update50</code> to ensure that your workspace is up-to-date!</p>
</div>
<div class="paragraph">
<p>Then, within CS50 IDE, download this problem set&#8217;s distribution code from <a href="http://cdn.cs50.net/2015/fall/psets/8/pset8/pset8.zip">http://cdn.cs50.net/2015/fall/psets/8/pset8/pset8.zip</a>. Unzip it into <code>~/workspace</code>, so that you ultimately have a <code>pset8</code> directory in <code>~/workspace</code>. Then delete <code>pset8.zip</code>. And then download <a href="http://cdn.cs50.net/2015/fall/psets/8/pset8/pset8.sql">http://cdn.cs50.net/2015/fall/psets/8/pset8/pset8.sql</a> into <code>~/workspace</code> as well.</p>
</div>
<div class="paragraph">
<p>(Remember how?)</p>
</div>
<div class="paragraph">
<p>Next, execute <code>ls</code> within <code>~/workspace/pset8</code>, and you should see three subdirectories: <code>bin</code>, <code>includes</code>, and <code>public</code>. Ensure that Apache isn&#8217;t already running (with some other root) by executing the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">apache50 stop</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then (re)start Apache with the below so that it uses <code>~/workspace/pset8/public</code> as its root.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">apache50 start ~/workspace/pset8/public</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, ensure MySQL is running by executing the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">mysql50 start</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alright, time for a test! In another tab, visit <code>https://ide50-username.cs50.io/</code>, where <code>username</code> is your own username (or click <strong>CS50 IDE &gt; Web Server</strong> on the top left).</p>
</div>
<div class="paragraph">
<p>You should find yourself at a map (without much of anything going on)! Feel free to click on the map and drag it around. Or try searching for your home town via the text box up top. It won&#8217;t find it yet! Indeed, the mashup itself doesn&#8217;t do much just yet!</p>
</div>
<div class="paragraph">
<p>Next, head to <code>https://ide50-username.cs50.io/phpmyadmin</code>, where <code>username</code> is again your own username, to access phpMyAdmin (or click <strong>CS50 IDE &gt; phpMyAdmin</strong>). Log in if prompted. (Recall that you can see your <strong>MySQL Username</strong> by executing <code>username50</code> and your <strong>MySQL Password</strong> by executing <code>password50</code> in a terminal tab.) You should then find yourself at phpMyAdmin&#8217;s main page.</p>
</div>
<div class="paragraph">
<p>Within CS50 IDE, now, open up <code>pset8.sql</code>, which you downloaded earlier. You should see a whole bunch of SQL statements.  Highlight them all, select <strong>Edit &gt; Copy</strong> (or hit control-c), then return to phpMyAdmin.  Click phpMyAdmin&#8217;s <strong>SQL</strong> tab, and paste everything you copied into that page&#8217;s big text box (which is below <strong>Run SQL query/queries on server "127.0.0.1"</strong>).  Skim what you just pasted to get a sense of the commands you&#8217;re about to execute, then click <strong>Go</strong>.  You should then see a greenish banner indicating success (i.e., <strong>1 row affected</strong>).  In phpMyAdmin&#8217;s top-left corner, you should now see link to a database called <strong>pset8</strong>, beneath which is a link to a table called <strong>places</strong>. (If you don&#8217;t, try reloading the page.) If you click <strong>places</strong>, you&#8217;ll find (gasp!) that this table is empty. But we have defined its "schema" (i.e., structure) for you. Click phpMyAdmin&#8217;s <strong>Structure</strong> tab to see.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s now download the data that we&#8217;ll ultimately import into this table. In a separate tab, head to <a href="http://download.geonames.org/export/zip/">http://download.geonames.org/export/zip/</a>, where you&#8217;ll see a whole bunch of ZIP files, "data dumps" (in <code>.txt</code> format) from the <a href="http://www.geonames.org/">GeoNames</a> geographical database, which "covers all countries and contains over eight million placenames that are available for download free of charge." Control- or right-click <code>US.zip</code> and select <strong>Copy Link Address</strong> (or your browser&#8217;s equivalent), and then download that ZIP into <code>~/workspace</code> within CS50 IDE, as by typing <code>wget</code> into a terminal and then pasting the address you just copied. Alternatively, you&#8217;re welcome to download another country&#8217;s data, though this spec will assume the US for the sake of discussion. See <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements</a> if unsure how to interpret the ZIP files' 2-letter "base names." (They&#8217;re "ISO 3166-1 alpha-2" country codes.)</p>
</div>
<div class="paragraph">
<p>Next, unzip <code>US.zip</code>, which should yield <code>US.txt</code>. (Remember how?) And then delete <code>US.zip</code>.</p>
</div>
<div class="paragraph">
<p>Per <a href="http://download.geonames.org/export/zip/readme.txt">http://download.geonames.org/export/zip/readme.txt</a>, <code>US.txt</code> is quite like a CSV file except that fields are delimited with <code>\t</code> (a tab character) instead of a comma. To see the file&#8217;s contents, you&#8217;re welcome to open it within CS50 IDE, but take care not to change it. In fact, to be safe, you might want to execute <code>chmod a-w US.txt</code> to ensure that even you can&#8217;t write to (i.e., change) it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="walkthrough"><a class="link" href="#walkthrough">Walkthrough</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Shall we take a stroll? Just keep in mind that we&#8217;ve made a few tweaks to the distribution code since this walkthrough was shot:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We&#8217;ve removed <code>constants.php</code> and <code>functions.php</code> from <code>includes</code>.</p>
</li>
<li>
<p>We&#8217;ve added <code>helpers.php</code>, which implements one function`, <code>lookup</code>, that&#8217;s called in <code>articles.php</code>.</p>
</li>
<li>
<p>We&#8217;ve added <code>vendor</code>, which contains CS50&#8217;s PHP library.</p>
</li>
<li>
<p>We&#8217;ve added <code>config.json</code> with which you can configure CS50&#8217;s PHP library to connect to a database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alrighty, let&#8217;s take that stroll!</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/ASA8fAEerNo?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>And now a closer look at the distribution code.</p>
</div>
<div class="sect2">
<h3 id="import"><a class="link" href="#import">import</a></h3>
<div class="paragraph">
<p>Navigate your way to <code>~/workspace/pset8/bin</code> and open up <code>import</code>. Not much there yet! Just a shebang and <code>TODO</code>. It&#8217;s in this file that you&#8217;ll ultimately write a PHP script that iterates over the lines in <code>US.txt</code>, <code>INSERT</code>ing data from each into <code>places</code>, that MySQL table. But more on that later.</p>
</div>
</div>
<div class="sect2">
<h3 id="index_html"><a class="link" href="#index_html">index.html</a></h3>
<div class="paragraph">
<p>Next navigate your way to <code>~/workspace/pset8/public</code> and open up <code>index.html</code>. Ah, there we go. If you look at the page&#8217;s <code>head</code>, you&#8217;ll see all those CSS and JavaScript libraries we&#8217;ll be using (plus some others). Included in HTML comments are URLs for each library&#8217;s documentation.</p>
</div>
<div class="paragraph">
<p>Next take a look at the page&#8217;s <code>body</code>, inside of which is <code>div</code> with a unique <code>id</code> of <code>map-canvas</code>. It&#8217;s into that <code>div</code> that we&#8217;ll be injecting a map. Below that <code>div</code>, meanwhile, is a <code>form</code>, inside of which is an <code>input</code> of type <code>text</code> with a unique <code>id</code> of <code>q</code> that we&#8217;ll use to take input from users.</p>
</div>
</div>
<div class="sect2">
<h3 id="styles_css"><a class="link" href="#styles_css">styles.css</a></h3>
<div class="paragraph">
<p>Now navigate your way to <code>~/workspace/pset8/public/css</code> and open up <code>styles.css</code>. In there is a bunch of CSS that implements the mashup&#8217;s default UI. Feel free to tinker (i.e., make changes, save the file, and reload the page in Chrome) to see how everything works, but best to undo any such changes for now before forging ahead.</p>
</div>
</div>
<div class="sect2">
<h3 id="scripts_js"><a class="link" href="#scripts_js">scripts.js</a></h3>
<div class="paragraph">
<p>Navigate next to <code>~/workspace/pset8/public/js</code> and open up <code>scripts.js</code>. Ah, the most interesting file yet! It&#8217;s this file that implements the mashup&#8217;s "front-end" UI, relying on Google Maps and some "back-end" PHP scripts for data (that we&#8217;ll soon explore). Let&#8217;s walk through this one.</p>
</div>
<div class="paragraph">
<p>Atop the file are some global variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>map</code>, which will contain a reference (i.e., a pointer of sorts) to the map we&#8217;ll soon be instantiating;</p>
</li>
<li>
<p><code>markers</code>, an array that will contain references to any markers we add atop the map; and</p>
</li>
<li>
<p><code>info</code>, a reference to an "info window" in which we&#8217;ll ultimately display links to articles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below those global variables is an anonymous function that will be called automatically by jQuery when the mashup&#8217;s DOM is fully loaded (i.e., when <code>index.html</code> and all its assets, CSS and JavaScript especially, have been loaded into memory).</p>
</div>
<div class="paragraph">
<p>Atop this anonymous function is a definition of <code>styles</code>, an array of two objects that we&#8217;ll use to configure our map, as per <a href="https://developers.google.com/maps/documentation/javascript/styling">https://developers.google.com/maps/documentation/javascript/styling</a>. Recall that <code>[</code> and <code>]</code> denote an array, while <code>{</code> and <code>}</code> denote an object. The (very pretty) indentation you see is just a stylistic convention to which it&#8217;s probably ideal to adhere in your code as well.</p>
</div>
<div class="paragraph">
<p>Below <code>styles</code> is <code>options</code>, another collection of keys and values that will ultimately be used to configure the map further, as per <a href="https://developers.google.com/maps/documentation/javascript/reference#MapOptions">https://developers.google.com/maps/documentation/javascript/reference#MapOptions</a>.</p>
</div>
<div class="paragraph">
<p>Next we define <code>canvas</code>, by using a bit of jQuery to get the DOM node whose unique <code>id</code> is <code>map-canvas</code>. Whereas <code>$("#map-canvas")</code> returns a jQuery object (that has a whole bunch of functionality built-in), <code>$("#map-canvas").get(0)</code> returns the actual, underlying DOM node that jQuery is just wrapping.</p>
</div>
<div class="paragraph">
<p>Perhaps the most powerful line yet is the next one in which we assign <code>map</code> (that global variable) a value. With</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="js language-js"><span class="keyword">new</span> google.maps.Map(canvas, options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>we&#8217;re telling the browser to instantiate a new map, injecting it into the DOM node specified by <code>canvas</code>), configured per <code>options</code>.</p>
</div>
<div class="paragraph">
<p>The line below that one, meanwhile, tells the browser to call <code>configure</code> (another function we&#8217;ve written) as soon as the map is loaded.</p>
</div>
<div class="sect3">
<h4 id="addmarker"><a class="link" href="#addmarker">addMarker</a></h4>
<div class="paragraph">
<p>Uh oh, a <code>TODO</code>. Ultimately, given a <code>place</code> (i.e., postal code and more), this function will need to add a marker (i.e., icon) to the map.</p>
</div>
</div>
<div class="sect3">
<h4 id="configure"><a class="link" href="#configure">configure</a></h4>
<div class="paragraph">
<p>This function, meanwhile, picks up where that anonymous function left off. Recall that <code>configure</code> is called as soon as the map has been loaded. Within this function we configure a number of "listeners," specifying what should happen when we "hear" certain events. For instance,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="js language-js">google.maps.event.addListener(map, <span class="string"><span class="delimiter">&quot;</span><span class="content">dragend</span><span class="delimiter">&quot;</span></span>, <span class="keyword">function</span>() {
    update();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>indicates that we want to listen for a <code>dragend</code> event on the map, calling the anonymous function provided when we hear it. That anonymous function, meanwhile, simply calls <code>update</code> (another function we&#8217;ll soon see). Per <a href="https://developers.google.com/maps/documentation/javascript/reference#Map">https://developers.google.com/maps/documentation/javascript/reference#Map</a>, <code>dragend</code> is "fired" (i.e., broadcasted) "when the user stops dragging the map."</p>
</div>
<div class="paragraph">
<p>Similarly do we listen for <code>zoom_changed</code>, which is fired "when the map zoom property changes" (i.e., the user zooms in or out).</p>
</div>
<div class="paragraph">
<p>On the other hand, upon hearing <code>dragstart</code>, we ultimately call <code>removeMarkers</code> so that all markers disappear temporarily as a user drags the map, thereby avoiding the appearance of a flicker that might otherwise happen as markers are removed and then re-added after the maps bounds (i.e., corners) have changed.</p>
</div>
<div class="paragraph">
<p>Below those listeners is our configuration of that typeahead plugin. Take another look at <a href="https://github.com/twitter/typeahead.js/blob/master/doc/jquery_typeahead.md">https://github.com/twitter/typeahead.js/blob/master/doc/jquery_typeahead.md</a> if unsure what <code>autoselect</code>, <code>highlight</code>, and <code>minLength</code> do here. Most importantly, though, know that the value of <code>source</code> (i.e., <code>search</code>) is the function that the plugin will call as soon as the user starts typing so that the function can respond with an array of search results based on the user&#8217;s input. For instance, if the user types <code>foo</code> into that text box, the function should ultimately return an array of all places in your database that somehow match <code>foo</code>. How to perform those matches will ultimately be left to you! The value of <code>templates</code>, meanwhile, is an object with two keys: <code>empty</code>, whose value is the HTML that should be displayed when <code>search</code> comes back empty (i.e., returns an array of length 0), and <code>suggestion</code>, whose value is a "template" that will be used to format each entry in the plugin&#8217;s dropdown menu. Right now, that template is simply <code>&lt;p&gt;TODO&lt;/p&gt;</code>, which means that every entry in that dropdown will literally say <code>TODO</code>. Ultimately, you&#8217;ll want to change that tvalue to something like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="js language-js"><span class="tag">&lt;p&gt;</span><span class="error">&lt;</span>%- place_name %<span class="error">&gt;</span>, <span class="error">&lt;</span>%- admin_name1 %<span class="error">&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>so that the plugin dynamically inserts those values (<code>place_name</code> and <code>admin_name1</code>) or some others for you. In contrast to <code>&lt;%=</code>, which Underscore also supports, the <code>&lt;%-</code> ensures that the value will be escaped, a la PHP&#8217;s <code>htmlspecialchars</code>, per <a href="http://underscorejs.org/#template">http://underscorejs.org/#template</a>.</p>
</div>
<div class="paragraph">
<p>Next notice these lines, which are admittedly a bit cryptic at first glance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="js language-js"><span class="predefined">$</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#q</span><span class="delimiter">&quot;</span></span>).on(<span class="string"><span class="delimiter">&quot;</span><span class="content">typeahead:selected</span><span class="delimiter">&quot;</span></span>, <span class="keyword">function</span>(eventObject, suggestion, name) {
    map.setCenter({<span class="key">lat</span>: parseFloat(suggestion.latitude), <span class="key">lng</span>: parseFloat(suggestion.longitude)});
    update();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>These lines are saying that if the HTML element whose unique <code>id</code> is <code>q</code> fires an event called <code>typeahead:selected</code>, as will happen when the user selects an entry from the plugin&#8217;s dropdown menu, we want jQuery to call an anonymous function whose second argument, <code>suggestion</code>, will be an object that represents the entry selected. Within that object must be at least two properties: <code>latitude</code> and <code>longitude</code>. We&#8217;ll then call <code>setCenter</code> in order to re-center the map at those coordinates, after which we&#8217;ll call <code>update</code> to update any markers.</p>
</div>
<div class="paragraph">
<p>Below those lines, meanwhile, are these:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="js language-js"><span class="predefined">$</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#q</span><span class="delimiter">&quot;</span></span>).focus(<span class="keyword">function</span>(eventData) {
    hideInfo();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you consult <a href="http://api.jquery.com/focus/">http://api.jquery.com/focus/</a>, hopefully those lines will make sense?</p>
</div>
<div class="paragraph">
<p>Below those are these:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="js language-js">document.addEventListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">contextmenu</span><span class="delimiter">&quot;</span></span>, <span class="keyword">function</span>(event) {
    event.returnValue = <span class="predefined-constant">true</span>;
    event.stopPropagation &amp;&amp; event.stopPropagation();
    event.cancelBubble &amp;&amp; event.cancelBubble();
}, <span class="predefined-constant">true</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unfortunately, Google Maps disables ctrl- and right-clicks on maps, which interferes with using Chrome&#8217;s (amazingly useful) <strong>Inspect Element</strong> feature, so these lines re-enable those.</p>
</div>
<div class="paragraph">
<p>Last up in <code>configure</code> is a call to <code>update</code> (which we&#8217;ll soon look at) and a call to <code>focus</code>, this time with no arguments. See <a href="http://api.jquery.com/focus/">http://api.jquery.com/focus/</a> for why!</p>
</div>
</div>
<div class="sect3">
<h4 id="hideinfo"><a class="link" href="#hideinfo">hideInfo</a></h4>
<div class="paragraph">
<p>Thankfully, a short function! This one just calls <code>close</code> on our global info window.</p>
</div>
</div>
<div class="sect3">
<h4 id="removemarkers"><a class="link" href="#removemarkers">removeMarkers</a></h4>
<div class="paragraph">
<p>Hm, a <code>TODO</code>. Ultimately, this function will need to remove any and all markers from the map!</p>
</div>
</div>
<div class="sect3">
<h4 id="search"><a class="link" href="#search">search</a></h4>
<div class="paragraph">
<p>This function is called by the typeahead plugin every time the user changes the mashup&#8217;s text box, as by typing or deleting a character. The value of the text box (i.e., whatever the user has typed in total) is passed to <code>search</code> as <code>query</code>. And the plugin also passes to <code>search</code> a second argument, <code>cb</code>, a "callback" which is a function that <code>search</code> should call as soon as it&#8217;s done searching for matches. In other words, this passing in of <code>cb</code> empowers <code>search</code> to be "asynchronous," whereby it will only call <code>cb</code> as soon as it&#8217;s ready, without blocking any of the mashup&#8217;s other functionality. Accordingly, <code>search</code> uses jQuery&#8217;s <code>getJSON</code> method to contact <code>search.php</code> asynchronously, passing in one parameter, <code>geo</code>, the value of which is <code>query</code>. Once <code>search.php</code> responds (however many milliseconds or seconds later), the anonymous function passed to <code>done</code> will be called and passed <code>data</code>, whose value will be whatever JSON that <code>search.php</code> has emitted. (Though if something goes wrong, <code>fail</code> is instead called.) Finally called is <code>cb</code>, to which <code>search</code> passes that same <code>data</code> so that the plugin can iterate over the places therein (assuming <code>search.php</code> found matches) in order to update the plugin&#8217;s drop-down. Phew.</p>
</div>
<div class="paragraph">
<p>Notice that we&#8217;re using <code>getJSON</code>'s "Promise" interface, per <a href="http://api.jquery.com/jquery.getjson/">http://api.jquery.com/jquery.getjson/</a>. Rather than pass an anonymous function directly to <code>getJSON</code> (to be called upon success), we&#8217;re instead "chaining" together calls to <code>getJSON</code>, <code>done</code> (whose argument, an anonymous function, will be called upon success), and <code>fail</code> (whose argument, another anonymous function, will be called upoon failure). See <a href="http://api.jquery.com/jquery.ajax/">http://api.jquery.com/jquery.ajax/</a> for some additional details. And see <a href="http://davidwalsh.name/write-javascript-promises">http://davidwalsh.name/write-javascript-promises</a> for an explanation of promises themselves.</p>
</div>
<div class="paragraph">
<p>Notice, too, that we&#8217;re using <code>console.log</code> much like you might use <code>printf</code> in C to log errors for debugging&#8217;s sake. You may want to do so as well! Just realize that <code>console.log</code> will log messages to the browser&#8217;s console (i.e., the <strong>Console</strong> tab of Chrome&#8217;s developer tools), not to your terminal window. See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console.log">https://developer.mozilla.org/en-US/docs/Web/API/Console.log</a> for tips.</p>
</div>
</div>
<div class="sect3">
<h4 id="showinfo"><a class="link" href="#showinfo">showInfo</a></h4>
<div class="paragraph">
<p>This function opens the info window at a particular marker with particular content (i.e., HTML). Though if only one argument is supplied (<code>marker</code>), <code>showInfo</code> simply displays a spinning icon (which is just an animated GIF). Notice, though, how this function is creating a string of HTML dynamically, thereafter passing it to <code>setContent</code>. Perhaps keep that technique in mind elsewhere!</p>
</div>
</div>
<div class="sect3">
<h4 id="update"><a class="link" href="#update">update</a></h4>
<div class="paragraph">
<p>Last up is <code>update</code>, which first determines the map&#8217;s current bounds, the coordinates of its top-right (northeast) and bottom-left (southwest) corners. It then passes those coordinates to <code>update.php</code> via a GET request (underneath the hood of <code>getJSON</code>) a la:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>GET /update.php?ne=37.45215513235332%2C-122.03830380859375&amp;q=&amp;sw=37.39503397352173%2C-122.28549619140625 HTTP/1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>%2C</code> are just commas that have been "URL-encoded." Realize that our use of commas is arbitary; we&#8217;re expecting <code>update.php</code> to parse and extract latitudes and longitudes from these parameters. We could have simply passed in four distinct parameters, but we felt it was semantically cleaner to pass in just one parameter per corner.</p>
</div>
<div class="paragraph">
<p>As we&#8217;ll soon see, <code>update.php</code> is designed to return a JSON array of places that fall within the map&#8217;s current bounds (i.e., cities within view). After all, with those two corners alone can you define a rectangle, which is exactly what the map is!</p>
</div>
<div class="paragraph">
<p>As soon as <code>update.php</code> responds, the anonymous function passed to <code>done</code> is called and passed <code>data</code>, the value of which is the JSON emitted by <code>update.php</code>. (Though if something goes wrong, <code>fail</code> is instead called.) That anonymous function first removes all markers from the map and then iteratively adds new markers, one for each place (i.e., city) in the JSON.</p>
</div>
<div class="paragraph">
<p>Phew and phew!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="update_php"><a class="link" href="#update_php">update.php</a></h3>
<div class="paragraph">
<p>Now navigate your way to <code>~/workspace/pset8/public</code> and open up <code>update.php</code>. Ah, okay, here&#8217;s the "back-end" script that outputs a JSON array of up to 10 places (i.e., cities) that fall within the specified bounds (i.e., within the rectangle defined by those corners). You won&#8217;t need to make changes to this file, but do read through it line by line, Googling any function with which you&#8217;re not familiar. Of particular interest should be <code>preg_match</code>, which allows you to compare strings against "regular expressions." While cryptic at first glance, our two calls to <code>preg_match</code> in <code>update.php</code> are simply ensuring that both <code>sw</code> and <code>ne</code> are comma-separated latitudes and longitudes.</p>
</div>
<div class="paragraph">
<p>Oh, and yes, this file&#8217;s SQL queries assume that the world is flat for simplity.</p>
</div>
</div>
<div class="sect2">
<h3 id="search_php"><a class="link" href="#search_php">search.php</a></h3>
<div class="paragraph">
<p>Next open up <code>search.php</code>. Ah, not much in there now. Just an eventual <code>TODO</code>!</p>
</div>
</div>
<div class="sect2">
<h3 id="articles_php"><a class="link" href="#articles_php">articles.php</a></h3>
<div class="paragraph">
<p>Now open up <code>articles.php</code>. This one we&#8217;ve implemented for you. Notice how it expects a GET parameter called <code>geo</code>, which it passes to <code>lookup</code> (which is defined in <code>helpers.php</code>) for localized news, thereafter returning a JSON array of objects, each of which has two keys: <code>link</code> and <code>title</code>.</p>
</div>
<div class="paragraph">
<p>You can actually see this file in action. Go ahead and visit URLs like</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ide50-username.cs50.io/articles.php?geo=Cambridge,+Massachusetts">https://ide50-username.cs50.io/articles.php?geo=Cambridge,+Massachusetts</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/articles.php?geo=02138">https://ide50-username.cs50.io/articles.php?geo=02138</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ide50-username.cs50.io/articles.php?geo=New+Haven,+Connecticut">https://ide50-username.cs50.io/articles.php?geo=New+Haven,+Connecticut</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/articles.php?geo=06511">https://ide50-username.cs50.io/articles.php?geo=06511</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <code>username</code> is your own username. You should see (pretty-printed) JSON arrays of articles!</p>
</div>
</div>
<div class="sect2">
<h3 id="config_php"><a class="link" href="#config_php">config.php</a></h3>
<div class="paragraph">
<p>Let&#8217;s now take a quick peek at the file that all those other PHP files have required. Navigate your way to <code>~/workspace/pset8/includes</code> and open up <code>config.php</code>. Ah, a file quite like Problem Set 7&#8217;s own <code>config.php</code>, albeit simpler. It even loads CS50&#8217;s PHP library, along with <code>helpers.php</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="helpers_php"><a class="link" href="#helpers_php">helpers.php</a></h3>
<div class="paragraph">
<p>In this file we&#8217;ve defined just one function, <code>lookup</code>. Unlike Problem Set 7&#8217;s <code>lookup</code>, though, this version of <code>lookup</code> queries Google News for articles for a particular geography. No need to understand every one this file&#8217;s lines, but do review its comments!</p>
</div>
</div>
<div class="sect2">
<h3 id="config_json"><a class="link" href="#config_json">config.json</a></h3>
<div class="paragraph">
<p>Next open up <code>config.json</code>. Ah, another familiar sight, albeit with for database called <code>pset8</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_to_do"><a class="link" href="#what_to_do">What To Do</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alright, it&#8217;s time to mash Google&#8217;s two APIs together.</p>
</div>
<div class="sect2">
<h3 id="config_json_2"><a class="link" href="#config_json_2">config.json</a></h3>
<div class="paragraph">
<p>First, tackle those <code>TODO</code>s inside of <code>config.json</code>, just as you did for Problem Set 7.</p>
</div>
</div>
<div class="sect2">
<h3 id="import_2"><a class="link" href="#import_2">import</a></h3>
<div class="paragraph">
<p>Next, recall that <code>places</code>, that MySQL table you imported earlier, is currently empty. The data that needs to be in it, meanwhile, is in <code>US.txt</code>.</p>
</div>
<div class="paragraph">
<p>Write, in <code>import</code>, a command-line script in PHP that accepts as a command-line argument the path to a file (which can be assumed to be formatted like <code>US.txt</code>) that iterates over the file&#8217;s lines, inserting each as new row in <code>places</code>. We leave the overall design of this script to you, but be sure to perform rigorous error-checking, leveraging <a href="http://php.net/manual/en/function.file-exists.php"><code>file_exists</code></a>, <a href="http://php.net/manual/en/function.is-readable.php"><code>is_readable</code></a>, and/or similar. Odds are you&#8217;ll find <a href="http://php.net/manual/en/function.fopen.php"><code>fopen</code></a>, <a href="http://php.net/manual/en/function.fgetcsv.php"><code>fgetcsv</code></a>, and <a href="http://php.net/manual/en/function.fclose.php"><code>fclose</code></a> of particular help, along with <code>CS50::query</code> from CS50&#8217;s PHP library. Note that <code>fgetcsv</code> takes an optional third argument that allows you to override the default delimiter from a comma to something else.</p>
</div>
<div class="paragraph">
<p>Be sure that the script is executable, as by executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">chmod u+x import</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thereafter, to run the script, you&#8217;ll want to execute a command like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">./import /path/to/US.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>/path/to/US.txt</code> is indeed the (relative or absolute) path to that file.</p>
</div>
<div class="paragraph">
<p>Odds are the first several runs of your script won&#8217;t be quite right, so you&#8217;ll likely want to empty <code>places</code> between runs, as by executing</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">TRUNCATE</span> places</code></pre>
</div>
</div>
<div class="paragraph">
<p>in phpMyAdmin&#8217;s <strong>SQL</strong> tab or by clicking <strong>Empty the table (TRUNCATE)</strong> in phpMyAdmin&#8217;s <strong>Operations</strong> tab. If you take the latter approach, be sure that you&#8217;ve first selected <strong>places</strong> (as by clicking it in phpMyAdmin&#8217;s lefthand column) so that you don&#8217;t truncate some other table. And be sure not to click <strong>Delete the table (DROP)</strong>, else you&#8217;ll have to re-import <code>pset8.sql</code> and re-create any changes you&#8217;d made.</p>
</div>
<div class="paragraph">
<p>Either now or later on, you should probably add one or more additional indexes to <code>places</code> in order to expedite searches (for <code>search.php</code>). See <a href="http://dev.mysql.com/doc/refman/5.5/en/mysql-indexes.html">http://dev.mysql.com/doc/refman/5.5/en/mysql-indexes.html</a> and <a href="http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html">http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html</a> (and Google!) for tips. (We defined <code>places</code> in <code>pset8.sql</code> as using a MyISAM "engine" so that a <code>FULLTEXT</code> index is an option.)</p>
</div>
<div class="paragraph">
<p>Even though data can sometimes be imported in bulk via phpMyAdmin&#8217;s <strong>Import</strong> tab, you must indeed (in case wondering!) implement <code>import</code> as prescribed!</p>
</div>
</div>
<div class="sect2">
<h3 id="search_php_2"><a class="link" href="#search_php_2">search.php</a></h3>
<div class="paragraph">
<p>Implement <code>search.php</code> in such a way that it outputs a JSON array of objects, each of which represents a row from <code>places</code> that somehow matches the value of <code>geo</code>. The value of <code>geo</code>, passed into <code>search.php</code> as a GET parameter, meanwhile, might be a city, state, and/or postal code. We leave it to you to decide what constitutes a match and, therefore, which rows to <code>SELECT</code>. Odds are you&#8217;ll find SQL&#8217;s <code>LIKE</code> and/or <code>MATCH</code> keywords helpful.</p>
</div>
<div class="paragraph">
<p>For instance, consider the query below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql">CS50::query(<span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT * FROM places WHERE postal_code = ?</span><span class="delimiter">&quot;</span></span>, <span class="error">$</span>_GET[<span class="string"><span class="delimiter">&quot;</span><span class="content">geo</span><span class="delimiter">&quot;</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unfortunately, that query requires that a user&#8217;s input be exactly equal to a postal code (per the <code>=</code>), which isn&#8217;t all that compelling for autocomplete. How about this one instead?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql">CS50::query(<span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT * FROM places WHERE postal_code LIKE ?</span><span class="delimiter">&quot;</span></span>, <span class="error">$</span>_GET[<span class="string"><span class="delimiter">&quot;</span><span class="content">geo</span><span class="delimiter">&quot;</span></span>] . <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how this query appends <code>%</code> to the user&#8217;s input, which happens to be SQL&#8217;s "wildcard" character that means "match any number of characters." The effect is that this query will return rows whose postal codes match whatever the user typed followed by any number of other characters. In other words, any of <code>0</code>, <code>02</code>, <code>021</code>, <code>0213</code>, and <code>02138</code> might return rows, as might any of <code>0</code>, <code>06</code>, <code>065</code>, <code>0651</code>, and <code>06511</code>.</p>
</div>
<div class="paragraph">
<p>Finally, consider a query like the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql">CS50::query(<span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT * FROM places WHERE MATCH(postal_code, place_name) AGAINST (?)</span><span class="delimiter">&quot;</span></span>, <span class="error">$</span>_GET[<span class="string"><span class="delimiter">&quot;</span><span class="content">geo</span><span class="delimiter">&quot;</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query searches not only on <code>postal_code</code> but also on <code>place_name</code>, but it leaves it to MySQL to figure out how. It assumes, though, that you&#8217;ve defined a <code>FULLTEXT</code> index jointly on <code>postal_code</code> and <code>place_name</code>, which you can do via phpMyAdmin&#8217;s <strong>Structure</strong> tab. (See if you can determine how!)</p>
</div>
<div class="paragraph">
<p>Odds are you won&#8217;t want to use any of these queries outright, instead deciding for yourself what kind of searches to support and what fields to search!</p>
</div>
<div class="paragraph">
<p>As before, see <a href="http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html">http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html</a> and <a href="http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html">http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html</a> for some guidance as well, though Google and Stack Overflow might yield more helpful tips.)</p>
</div>
<div class="paragraph">
<p>To test <code>search.php</code>, even before your text box is operational, simply visit URLs like</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=Cambridge,Massachusetts,US">https://ide50-username.cs50.io/search.php?geo=Cambridge,Massachusetts,US</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=Cambridge,+Massachusetts">https://ide50-username.cs50.io/search.php?geo=Cambridge,+Massachusetts</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=Cambridge,+MA">https://ide50-username.cs50.io/search.php?geo=Cambridge,+MA</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=Cambridge+MA">https://ide50-username.cs50.io/search.php?geo=Cambridge+MA</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=02138">https://ide50-username.cs50.io/search.php?geo=02138</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=New+Haven,Connecticut,US">https://ide50-username.cs50.io/search.php?geo=New+Haven,Connecticut,US</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=New+Haven,+Massachusetts">https://ide50-username.cs50.io/search.php?geo=New+Haven,+Massachusetts</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=New+Have,+MA">https://ide50-username.cs50.io/search.php?geo=New+Have,+MA</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=New+Haven+MA">https://ide50-username.cs50.io/search.php?geo=New+Haven+MA</a></p>
</li>
<li>
<p><a href="https://ide50-username.cs50.io/search.php?geo=06511">https://ide50-username.cs50.io/search.php?geo=06511</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and other such variants, where <code>username</code> is your own username, to see if you get back the JSON you expect (and not, say, some big, orange error!). Again, though, we leave it to you to decide just how tolerate <code>search.php</code> will be of abbreviations, punctuation, and the like. The more flexible, though, the better! Try to implement features that you yourself would expect as a user!</p>
</div>
<div class="paragraph">
<p>Feel free to tinker with the staff&#8217;s solution at <a href="https://mashup.cs50.net/">https://mashup.cs50.net/</a>, inspecting its HTTP requests via Chrome&#8217;s Network tab as needed, if unsure how your own code should work!</p>
</div>
</div>
<div class="sect2">
<h3 id="scripts_js_2"><a class="link" href="#scripts_js_2">scripts.js</a></h3>
<div class="paragraph">
<p>First, toward the top of <code>scripts.js</code>, you&#8217;ll see an anonymous function, inside of which is a definition of <code>options</code>, an object, one of whose keys is <code>center</code>, the value of which is an object with two keys of its own, <code>lat</code>, and <code>lng</code>. Per the comment alongside that object, your mashup&#8217;s map is currently centered on Stanford, California. (D&#8217;oh.) Change the coordinates of your map&#8217;s center to Cambridge (42.3770, -71.1256) or New Haven (41.3184, -72.9318) or anywhere else! (Though be sure to choose coordinates in the US if you downloaded <code>US.txt</code>!) Once you save your changes and reload your map, you should find yourself there! Zoom out as needed to confirm visually.</p>
</div>
<div class="paragraph">
<p>As before, feel free to tinker with the staff&#8217;s solution at <a href="https://mashup.cs50.net/">https://mashup.cs50.net/</a>, inspecting its HTTP requests via Chrome&#8217;s Network tab as needed, if unsure how your own code should work!</p>
</div>
<div class="sect3">
<h4 id="configure_2"><a class="link" href="#configure_2">configure</a></h4>
<div class="paragraph">
<p>Now that <code>search.php</code> and your text box are (hopefully!) working, modify the value of <code>suggestion</code> in <code>configure</code>, the function in <code>scripts.js</code>, so that it displays matches (i.e., <code>place_name</code>, <code>admin_name1</code>, and/or other fields) instead of <code>TODO</code>. Recall that a value like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="js language-js"><span class="tag">&lt;p&gt;</span><span class="error">&lt;</span>%- place_name %<span class="error">&gt;</span>, <span class="error">&lt;</span>%- admin_name1 %<span class="error">&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>might do the trick, perhaps coupled with some CSS.</p>
</div>
</div>
<div class="sect3">
<h4 id="addmarker_2"><a class="link" href="#addmarker_2">addMarker</a></h4>
<div class="paragraph">
<p>Implement <code>addMarker</code> in <code>scripts.js</code> in such a way that it adds a marker for <code>place</code> on the map, where <code>place</code> is a JavaScript object that represents a row from <code>places</code>, your MySQL table. See <a href="https://developers.google.com/maps/documentation/javascript/markers">https://developers.google.com/maps/documentation/javascript/markers</a> for tips. But also see <a href="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.9/">http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.9/</a> for an alternative to Google&#8217;s own markers, which add support for labels beneath markers. (Recall that we&#8217;re already loading <code>markerwithlabel_packed.js</code> for you in <code>index.html</code>.)</p>
</div>
<div class="paragraph">
<p>When a marker is clicked, it should trigger the mashup&#8217;s info window to open, anchored at that same marker, the contents of which should be an unordered list of links to article for that article&#8217;s location (unless <code>articles.php</code> outputs an empty array)!</p>
</div>
<div class="paragraph">
<p>Again, not to worry if some of your markers (or labels) overlap others, assuming such is the result of imperfections in <code>US.txt</code> and not your own code!</p>
</div>
<div class="paragraph">
<p>If you&#8217;d like to customize your markers' icon, see <a href="https://developers.google.com/maps/documentation/javascript/markers#simple_icons">https://developers.google.com/maps/documentation/javascript/markers#simple_icons</a>. For the URLs of icons built-into Google Maps, see <a href="http://www.lass.it/Web/viewer.aspx?id=4">http://www.lass.it/Web/viewer.aspx?id=4</a>. For third-party icons, see <a href="http://mapicons.nicolasmollet.com/category/markers/">http://mapicons.nicolasmollet.com/category/markers/</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="removemarkers_2"><a class="link" href="#removemarkers_2">removeMarkers</a></h4>
<div class="paragraph">
<p>Implement <code>removeMarkers</code> in such a way that it removes all markers from the map. Odds are you&#8217;ll need <code>addMarker</code> to modify that global variable called <code>markers</code> in order for <code>removeMarkers</code> to work its own magic!</p>
</div>
</div>
<div class="sect3">
<h4 id="personal_touch"><a class="link" href="#personal_touch">personal touch</a></h4>
<div class="paragraph">
<p>Last but not least, add at least one personal touch to your mashup, altering its aesthetics or adding some feature that (ideally!) no classmate has. Any touch that compels you to learn (or Google!) at least one new technique is of reasonable scope.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how_to_submit"><a class="link" href="#how_to_submit">How to Submit</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="step_1_of_2"><a class="link" href="#step_1_of_2">Step 1 of 2</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When ready to submit, "export" your MySQL database (i.e., save it into a text file) by executing the commands below, where <code>username</code> is your own username, pasting your MySQL password when prompted for a password.  (Recall that you can see your MySQL password by executing <code>password50</code> in a terminal tab.) For security, you won&#8217;t see the password as you paste it.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>cd ~/workspace/pset8
mysqldump -u username -p pset8 &gt; pset8.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you type <code>ls</code> thereafter, you should see that you have a new file called <code>pset8.sql</code> in <code>~/workspace/pset8</code>.  (If you realize later that you need to make a change to your database and re-export it, you can delete <code>pset8.sql</code> with <code>rm pset8.sql</code>, then re-export as before.)</p>
</div>
</li>
<li>
<p>Toward CS50 IDE&#8217;s top-left corner, within its "file browser" (not within a terminal window), control-click or right-click your <code>pset8</code> folder and then select <strong>Download</strong>. You should find that your browser has downloaded <code>pset8.zip</code>.</p>
</li>
<li>
<p>In a separate tab or window, log into <a href="http://cs50.edx.org/submit">CS50 Submit</a>, logging in if prompted.</p>
</li>
<li>
<p>Click <strong>Submit</strong> toward the window&#8217;s top-left corner.</p>
</li>
<li>
<p>Under <strong>Problem Set 8</strong> on the screen that appears, click <strong>Upload New Submission</strong>.</p>
</li>
<li>
<p>On the screen that appears, click <strong>Add files&#8230;</strong>.  A window entitled <strong>Open Files</strong> should appear.</p>
</li>
<li>
<p>Navigate your way to <code>pset8.zip</code>. Odds are it&#8217;s in your <strong>Downloads</strong> folder or wherever your browser downloads files by default.  Once you find <code>pset8.zip</code>, click it once to select it, then click <strong>Open</strong> (or the like).</p>
</li>
<li>
<p>Click <strong>Start upload</strong> to upload all of your files at once to CS50&#8217;s servers.</p>
</li>
<li>
<p>On the screen that appears, you should see a window with <strong>No File Selected</strong>.  If you move your mouse toward the window&#8217;s lefthand side, you should see a list of the files you uploaded.  Click each to confirm the contents of each.  (No need to click any other buttons or icons.)  If confident that you submitted the files you intended, consider your source code submitted!  If you&#8217;d like to re-submit different (or modified) files, simply return to <a href="http://cs50.edx.org/submit">CS50 Submit</a> and repeat these steps.  You may re-submit as many times as you&#8217;d like; we&#8217;ll grade your most recent submission, so long as it&#8217;s before the deadline.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="step_2_of_2"><a class="link" href="#step_2_of_2">Step 2 of 2</a></h3>
<div class="paragraph">
<p>Head to <a href="http://cs50.edx.org/2016/psets/8/">http://cs50.edx.org/2016/psets/8/</a> where a short form awaits.  (It&#8217;s a bit longer than usual, so it&#8217;s okay if you start it before but submit it shortly after the problem set&#8217;s deadline.) Once you have submitted that form (as well as your source code), you are done!</p>
</div>
<div class="paragraph">
<p>This was Problem Set 8, your last!</p>
</div>
</div>
</div>
</div>
        </div>
        
        

        <div id="footer">
            Copyright &#169; David J. Malan
        </div>

        <script>

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-8162502-43']);
            _gaq.push(['_trackPageview']);

            (function() {
              var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
              ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
              var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>

    </body>
</html>